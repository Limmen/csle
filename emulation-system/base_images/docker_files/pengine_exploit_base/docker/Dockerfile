# OS
FROM kimham/csle_ubuntu_20_base:0.7.0
USER root

# Add Pengine Server
ADD docker_files/pengine_exploit_base/docker/server.pl /server.pl
RUN chmod 777 /server.pl

ADD docker_files/pengine_exploit_base/docker/daemon.pl /daemon.pl
RUN chmod 777 /daemon.pl

# Create user to run the server
RUN useradd -rm -d /home/pengine -s /bin/bash -g root -G sudo -p "$(openssl passwd -1 pengine)" pengine

# Backdoor
ADD docker_files/pengine_exploit_base/docker/create_backdoor_pengine_exploit.sh /create_backdoor_pengine_exploit.sh
RUN chmod 777 /create_backdoor_pengine_exploit.sh

